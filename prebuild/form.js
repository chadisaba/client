var FormAddPlugins={addPlugins:function(t){t.plugins=[],t.initialConfig.noPlugin||(t.initialConfig.externalEditingPlugin?t.plugins.push(new Plugins.form.FormPlugin(t.initialConfig.externalEditingPlugin)):t.plugins.push(new Plugins.form.FormPlugin({withValidation:!1,showConfirmationOnSave:!0,showHistoryBtn:!1,showCancelBtn:!1,pluginId:"formediting"})))}};Ext.define("Plugins.form.FormEditingPlugin",{extend:"Ext.AbstractPlugin",alias:"widget.plugin.formediting",config:{toolbarSelector:null},withValidation:!1,showHistoryBtn:!0,showCancelBtn:!0,showConfirmationOnSave:!0,showConfirmationOnQuit:!0,pluginId:"formediting",init:function(t){var e=this;this.form=t;for(var i=t.query("field"),n=0;n<i.length;n++)i[n].addListener("change",this.handleFieldChanged,this);t.editMode=!1;var o=t.query("#editingtoolbar");1==o.length?(this.tb=o[0],this.fillToolbar()):0==o.length&&(this.tb=this.createNewToolbar(),this.fillToolbar(),t.addDocked(this.tb));for(var d=t.query("grid[blocked=false]"),n=0;n<d.length;n++)d[n].query("#grideditingTb").length<1&&e.addTb(d[n])},lockForm:function(t){this.restoreForm(),t&&this.editBtnCtn.hide()},restoreForm:function(){var t=this;t.editBtnCtn.show(),t.saveBtnCtn.hide(),t.showCancelBtn&&t.cancelBtnCtn.hide(),t.quitBtnCtn.hide(),t.showHistoryBtn&&t.chHistBtnCtn.show(),t.editBtnCtn.down("#editBtn").setDisabled(!1),t.saveBtnCtn.down("#saveBtn").setDisabled(!0),t.showCancelBtn&&t.cancelBtnCtn.down("#cancelBtn").setDisabled(!0),t.quitBtnCtn.down("#quitBtn").setDisabled(!1),t.showHistoryBtn&&t.chHistBtnCtn.down("#chHistBtn").setDisabled(!1)},createNewToolbar:function(){var t=Ext.create("Ext.toolbar.Toolbar",{dock:"top",itemId:"editingtoolbar"});return t},fillToolbar:function(){this.createEditBtnCtn(),this.showCancelBtn&&this.createCancelBtnCtn(),this.createSaveBtnCtn(),this.createQuitBtnCtn(),this.showHistoryBtn&&this.createChHistBtnCtn(),this.tb.add(this.editBtnCtn),this.tb.add({xtype:"tbfill"}),this.tb.add(this.saveBtnCtn),this.showCancelBtn&&this.tb.add(this.cancelBtnCtn),this.tb.add(this.quitBtnCtn),this.showHistoryBtn&&this.tb.add(this.chHistBtnCtn)},createEditBtnCtn:function(){var t=this;this.editBtnCtn=Ext.create("Ext.container.Container",{itemId:"editBtnCtn",hidden:!0,items:[{xtype:"button",text:"${edit}",tooltip:"${gridEdit.editTip}",itemId:"editBtn",glyph:"xf040@FontAwesome",listeners:{click:function(e,i,n){t.enterEditMode(),t.form.fireEvent("inEdit",t.form)}}}]})},createCancelBtnCtn:function(){var t=this;this.cancelBtnCtn=Ext.create("Ext.container.Container",{itemId:"cancelBtnCtn",hidden:!0,items:[{xtype:"button",itemId:"cancelBtn",text:"Annuler",glyph:"xf0e2@FontAwesome",disabled:!0,tooltip:"Annuler les modifications",listeners:{click:function(e,i,n){var o=Ext.create("Common.ux.window.PromptWindow",{withClose:!1});o.setTitle("${gridEdit.cancelTitle}"),o.down("#confirmMsg").setText("${gridEdit.cancelMsg}"),o.down("#description").hide(),o.down("#inputText").hide(),o.query("button")[0].setText("Oui"),o.query("button")[1].setText("Non"),o.callbackFunction=function(e,i){"ok"===e?(Utility.loading.start(o.query("button")[0]),t.form.fireEvent("resetEdit",t.form,o)):o.close()},o.show()}}}]})},createSaveBtnCtn:function(){var t=this;this.saveBtnCtn=Ext.create("Ext.container.Container",{itemId:"saveBtnCtn",hidden:!0,items:[{xtype:"button",itemId:"saveBtn",text:"Enregistrer",disabled:!0,glyph:"xf0c7@FontAwesome",tooltip:"Enregistrer les modifications",listeners:{click:function(e,i,n){if(t.showConfirmationOnSave){var o=Ext.create("Common.ux.window.PromptWindow",{withClose:!1,closable:!1});t.withValidation?(o.setTitle("${gridEdit.submitTitle}"),o.down("#confirmMsg").setText("${gridEdit.submitMsg}")):(o.setTitle("${gridEdit.applyChTitle}"),o.down("#confirmMsg").setText("${gridEdit.applyChMsg}")),o.query("button")[0].setText("Oui"),o.query("button")[1].setText("Non"),o.down("#description").setText("${gridEdit.comment}"),o.callbackFunction=function(e,i){"ok"===e?(Utility.loading.start(o.query("button")[0]),t.form.fireEvent("saveEdit",t.form,o,i)):o.close()},o.show()}else Utility.loading.start(this),t.form.fireEvent("saveEdit",t.form,this)}}}]})},createChHistBtnCtn:function(){var t=this;this.chHistBtnCtn=Ext.create("Ext.container.Container",{itemId:"chHistBtnCtn",items:[{xtype:"button",itemId:"chHistBtn",glyph:"xf073@FontAwesome",tooltip:"${chHist}",listeners:{click:function(e,i,n){t.form.fireEvent("chHist",t.form)}}}]})},createQuitBtnCtn:function(){var t=this;this.quitBtnCtn=Ext.create("Ext.container.Container",{itemId:"quitBtnCtn",hidden:!0,items:[{xtype:"button",itemId:"quitBtn",glyph:"xf08b@FontAwesome",text:"Quitter",tooltip:translate("$gridEdit.quitTip"),listeners:{click:function(e,i,n){if(t.showConfirmationOnQuit){var o=Ext.create("Common.ux.window.PromptWindow",{withClose:!1});o.setTitle("${gridEdit.quitEditionTitle}"),o.down("#confirmMsg").setText(translate("gridEdit.quitEditionMsg")),o.down("#description").hide(),o.down("#inputText").hide(),o.query("button")[0].setText(translate("yes")),o.query("button")[1].setText(translate("no")),o.callbackFunction=function(e,i){"ok"===e?(Utility.loading.start(o.query("button")[0]),t.form.fireEvent("quitEdit",t.form,o)):o.close()},o.show()}else t.form.fireEvent("quitEdit",t.form)}}}]})},enterEditMode:function(){var t=this;t.form.editMode=!0,t.form.recordValues=t.form.getForm().getValues(),t.editBtnCtn.hide(),t.showCancelBtn&&t.cancelBtnCtn.show(),t.saveBtnCtn.show(),t.quitBtnCtn.show(),t.saveBtnCtn.down("#saveBtn").setDisabled(!0),t.showCancelBtn&&t.cancelBtnCtn.down("#cancelBtn").setDisabled(!0);for(var e=t.form.query("[readOnly=true]"),i=t.form.query("fieldset"),n=0;n<e.length;n++)Ext.isDefined(e[n].blocked)||e[n].blocked||(e[n].setReadOnly(!1),"textfield"===e[n].getXType()&&e[n].removeCls("textfieldReadonly"));e=t.form.query("radiofield");for(var n=0;n<e.length;n++){var o=e[n];Ext.isDefined(e[n].blocked)||e[n].blocked||o.enable()}for(var n=0;n<i.length;n++)i[n].blocked||i[n].addCls("grey-fieldset");for(var d=t.form.query("grid[blocked=false]"),n=0;n<d.length;n++)d[n].query("#grideditingTb")[0].down("#gridAddBtnCtn").show(),d[n].query("#grideditingTb")[0].down("#gridDeleteBtnCtn").show(),d[n].onlyAD!==!0&&d[n].query("#grideditingTb")[0].down("#gridModifyBtnCtn").show(),d[n].inEdition=!0;t.form.addBodyCls("editFormPanel"),t.form.removeBodyCls("readOnlyFormPanel")},addTb:function(t){var e=this,i=Ext.create("Ext.container.Container",{itemId:"gridAddBtnCtn",hidden:!0,items:[{xtype:"button",itemId:"gridAddBtn",iconCls:"icon-add",text:"${add}",tooltip:"${gridEdit.addTip}",listeners:{click:function(i,n,o){e.form.fireEvent("addItem",t)}}}]}),n=Ext.create("Ext.container.Container",{itemId:"gridDeleteBtnCtn",hidden:!0,items:[{xtype:"button",itemId:"gridDeleteBtn",iconCls:"icon-bin2",disabled:!0,text:"${delete}",tooltip:"${gridEdit.deleteTip}",listeners:{click:function(i,n,o){t.down("#gridDeleteBtn").setDisabled(!0),e.form.fireEvent("deleteItem",t)}}}]}),o=Ext.create("Ext.container.Container",{itemId:"gridModifyBtnCtn",hidden:!0,items:[{xtype:"button",itemId:"gridModifyBtn",disabled:!0,text:translate("modify"),tooltip:translate("gridEdit.modifyTip"),listeners:{click:function(i,n,o){e.form.fireEvent("modifyItem",t)}}}]}),d=Ext.create("Ext.container.Container",{itemId:"gridChHistBtnCtn",items:[{xtype:"button",itemId:"gridChHistBtn",iconCls:"icon-script",tooltip:translatr("chHist"),listeners:{click:function(i,n,o){e.form.fireEvent("chHist",t)}}}]}),r=Ext.create("Ext.toolbar.Toolbar",{dock:"top",itemId:"grideditingTb"});r.add(i),r.add(n),t.onlyAD!==!0&&r.add(o),r.add("->"),r.add(d),t.addDocked(r),e.configureGrid(t)},configureGrid:function(t){t.on("select",function(e,i,n,o){i.data.locked||i.data.toDelete?(t.down("#gridDeleteBtn").setDisabled(!0),t.onlyAD!==!0&&t.down("#gridModifyBtn").setDisabled(!0)):(t.down("#gridDeleteBtn").setDisabled(!1),t.onlyAD!==!0&&t.down("#gridModifyBtn").setDisabled(!1))},this);var e=Ext.create("Ext.grid.column.Column",{renderer:function(e,i,n,o,d,r,s){return n.data.notValid&&1==t.inEdition?'<div class="icon-error" style="height:16px !important;" data-qtip="${gridEdit.notValid}<br>'+n.data.notValidTip+'">&nbsp;</div>':n.data.toDelete&&1==t.inEdition?'<div class="icon-bin2" style="height:16px !important;" data-qtip="${gridEdit.toDelete}">&nbsp;</div>':n.data.added&&1==t.inEdition?'<div class="icon-add" style="height:16px !important;" data-qtip="${gridEdit.added}">&nbsp;</div>':n.data.modified&&1==t.inEdition?'<div class="icon-pencil" style="height:16px !important;" data-qtip="${gridEdit.modified}">&nbsp;</div>':n.data.locked?'<div class="icon-lock" style="height:16px !important;" data-qtip="${gridEdit.locked}">&nbsp;</div>':""},itemId:"actionColumn",maxWidth:28,minWidth:28,width:28,menuDisabled:!0,enableColumnHide:!1,hideable:!1});t.headerCt.insert(t.columns.length,e),t.getView().refresh()},checkIfModifications:function(t){var e=this;(t.getStore().query("toDelete",!0).items.length>0||t.getStore().query("added",!0).items.length>0||t.getStore().query("modified",!0).items.length>0)&&(e.saveBtnCtn.down("#saveBtn").setDisabled(!1),e.showCancelBtn&&e.cancelBtnCtn.down("#cancelBtn").setDisabled(!1))},quitEditMode:function(){var t=this;t.form.editMode=!1,t.editBtnCtn.show(),t.saveBtnCtn.hide(),t.showCancelBtn&&t.cancelBtnCtn.hide(),t.quitBtnCtn.hide(),t.showHistoryBtn&&t.chHistBtnCtn.show(),t.editBtnCtn.down("#editBtn").setDisabled(!1),t.saveBtnCtn.down("#saveBtn").setDisabled(!0),t.showCancelBtn&&t.cancelBtnCtn.down("#cancelBtn").setDisabled(!0),t.quitBtnCtn.down("#quitBtn").setDisabled(!1),t.showHistoryBtn&&t.chHistBtnCtn.down("#chHistBtn").setDisabled(!1);for(var e=t.form.query("[readOnly=false]"),i=t.form.query("fieldset"),n=0;n<e.length;n++)e[n].setReadOnly(!0),"textfield"===e[n].getXType()&&e[n].addCls("textfieldReadonly"),e[n].removeCls("dirty-form-field");e=t.form.query("radiofield");for(var n=0;n<e.length;n++){var o=e[n];o.getValue()?o.enable():o.disable()}for(var n=0;n<i.length;n++)if(i[n].removeCls("grey-fieldset"),i[n].getEl()){var d=i[n].getEl().down(".x-fieldset-header-text");Ext.isEmpty(d)||d.removeCls("dirty-form-field")}for(var r=t.form.query("gridpanel"),n=0;n<r.length;n++)r[n].blocked||(r[n].query("#grideditingTb")[0].down("#gridAddBtnCtn").hide(),r[n].query("#grideditingTb")[0].down("#gridDeleteBtnCtn").hide(),r[n].onlyAD!==!0&&r[n].query("#grideditingTb")[0].down("#gridModifyBtnCtn").hide(),r[n].inEdition=!1);this.form.addBodyCls("readOnlyFormPanel"),this.form.removeBodyCls("editFormPanel")},cancelEdit:function(){var t=this;t.showCancelBtn&&t.cancelBtnCtn.down("#cancelBtn").setDisabled(!0),t.saveBtnCtn.down("#saveBtn").setDisabled(!0),t.editBtnCtn.hide(),t.form.recordValues=t.form.getForm().getValues()},handleFieldChanged:function(t,e,i,n){var o=this,d=o.form.recordValues,r=o.form.getValues();if(o.form.editMode&&!t.blocked){if(void 0!==t.isAmtFld&&t.isAmtFld===!0){var s=t.getValue().length;s>21?(t.inputEl.dom.maxLength=18,t.maxLength=18,t.isValid()):(t.inputEl.dom.maxLength=26,t.maxLength=26,t.isValid())}JSON.stringify(d)!=JSON.stringify(r)&&o.form.isValid()?(o.saveBtnCtn.down("button").setDisabled(!1),o.showCancelBtn&&o.cancelBtnCtn.down("button").setDisabled(!1)):(o.saveBtnCtn.down("button").setDisabled(!0),o.showCancelBtn&&o.cancelBtnCtn.down("button").setDisabled(!0)),"radiofield"!==t.getXType()&&e!=d[t.name]||"radiofield"===t.getXType()&&t.getGroupValue()!=d[t.name]?o.highlightModifications(t):o.unHighlightModifications(t)}},checkChangesOnOtherFields:function(t){var e=this.form.recordValues;if(null!=t){var i=t.items.items;if(t.query("radiogroup").length>1)for(var n=0;n<i.length;n++){var o=i[n].getChecked();if(o.length>1)return!0;var d=i[n].getChecked()[0];if(d){var r=d.name;if(e[r]!=i[n].getChecked()[0].inputValue)return!0}}}},highlightModifications:function(t){if("radiofield"===t.getXType()){var e=t.up("fieldset"),i=e.getEl().down(".x-fieldset-header-text");i.addCls("dirty-form-field")}else t.addCls("dirty-form-field")},unHighlightModifications:function(t){var e=!1;if("radiofield"===t.getXType()){var i=t.up("fieldset");if(e=this.checkChangesOnOtherFields(i))return;var n=i.getEl().down(".x-fieldset-header-text");n.removeCls("dirty-form-field")}else t.removeCls("dirty-form-field")}}),Ext.define("Plugins.form.FormPlugin",{extend:"Ext.AbstractPlugin",alias:"widget.plugin.formediting",config:{toolbarSelector:null},withValidation:!1,showHistoryBtn:!0,showCancelBtn:!0,showConfirmationOnSave:!0,showConfirmationOnQuit:!0,pluginId:"formediting",init:function(t){this.form=t;for(var e=t.query("field"),i=0;i<e.length;i++)e[i].addListener("change",this.handleFieldChanged,this);t.editMode=!1;var n=t.query("#editingtoolbar");1==n.length?(this.tb=n[0],this.fillToolbar()):0==n.length&&(this.tb=this.createNewToolbar(),this.fillToolbar(),t.addDocked(this.tb))},lockForm:function(t){this.restoreForm(),t&&this.editBtnCtn.hide()},restoreForm:function(){var t=this;t.editBtnCtn.show(),t.saveBtnCtn.hide(),t.showCancelBtn&&t.cancelBtnCtn.hide(),t.quitBtnCtn.hide(),t.showHistoryBtn&&t.chHistBtnCtn.show(),t.editBtnCtn.down("#editBtn").setDisabled(!1),t.saveBtnCtn.down("#saveBtn").setDisabled(!0),t.showCancelBtn&&t.cancelBtnCtn.down("#cancelBtn").setDisabled(!0),t.quitBtnCtn.down("#quitBtn").setDisabled(!1),t.showHistoryBtn&&t.chHistBtnCtn.down("#chHistBtn").setDisabled(!1)},createNewToolbar:function(){var t=Ext.create("Ext.toolbar.Toolbar",{dock:"top",itemId:"editingtoolbar"});return t},fillToolbar:function(){this.createEditBtnCtn(),this.showCancelBtn&&this.createCancelBtnCtn(),this.createSaveBtnCtn(),this.createQuitBtnCtn(),this.showHistoryBtn&&this.createChHistBtnCtn(),this.tb.add(this.editBtnCtn),this.tb.add({xtype:"tbfill"}),this.tb.add(this.saveBtnCtn),this.showCancelBtn&&this.tb.add(this.cancelBtnCtn),this.tb.add(this.quitBtnCtn),this.showHistoryBtn&&this.tb.add(this.chHistBtnCtn)},createEditBtnCtn:function(){var t=this;this.editBtnCtn=Ext.create("Ext.container.Container",{itemId:"editBtnCtn",hidden:!0,items:[{xtype:"button",text:"${edit}",tooltip:"${gridEdit.editTip}",itemId:"editBtn",glyph:"xf040@FontAwesome",listeners:{click:function(e,i,n){t.enterEditMode(),t.form.fireEvent("inEdit",t.form)}}}]})},createCancelBtnCtn:function(){var t=this;this.cancelBtnCtn=Ext.create("Ext.container.Container",{itemId:"cancelBtnCtn",hidden:!0,items:[{xtype:"button",itemId:"cancelBtn",text:"Annuler",glyph:"xf0e2@FontAwesome",disabled:!0,tooltip:"Annuler les modifications",listeners:{click:function(e,i,n){var o=Ext.create("Common.ux.window.PromptWindow",{withClose:!1});o.setTitle("${gridEdit.cancelTitle}"),o.down("#confirmMsg").setText("${gridEdit.cancelMsg}"),o.down("#description").hide(),o.down("#inputText").hide(),o.query("button")[0].setText("Oui"),o.query("button")[1].setText("Non"),o.callbackFunction=function(e,i){"ok"===e?(Utility.loading.start(o.query("button")[0]),t.form.fireEvent("resetEdit",t.form,o)):o.close()},o.show()}}}]})},createSaveBtnCtn:function(){var t=this;this.saveBtnCtn=Ext.create("Ext.container.Container",{itemId:"saveBtnCtn",hidden:!0,items:[{xtype:"button",itemId:"saveBtn",text:"Enregistrer",disabled:!0,glyph:"xf0c7@FontAwesome",tooltip:"Enregistrer les modifications",listeners:{click:function(e,i,n){if(t.showConfirmationOnSave){var o=Ext.create("Common.ux.window.PromptWindow",{withClose:!1,closable:!1});t.withValidation?(o.setTitle("${gridEdit.submitTitle}"),o.down("#confirmMsg").setText("${gridEdit.submitMsg}")):(o.setTitle("${gridEdit.applyChTitle}"),o.down("#confirmMsg").setText("${gridEdit.applyChMsg}")),o.query("button")[0].setText("Oui"),o.query("button")[1].setText("Non"),o.down("#description").setText("${gridEdit.comment}"),o.callbackFunction=function(e,i){"ok"===e?(Utility.loading.start(o.query("button")[0]),t.form.fireEvent("saveEdit",t.form,o,i)):o.close()},o.show()}else Utility.loading.start(this),t.form.fireEvent("saveEdit",t.form,this)}}}]})},createChHistBtnCtn:function(){var t=this;this.chHistBtnCtn=Ext.create("Ext.container.Container",{itemId:"chHistBtnCtn",items:[{xtype:"button",itemId:"chHistBtn",glyph:"xf073@FontAwesome",tooltip:"${chHist}",listeners:{click:function(e,i,n){t.form.fireEvent("chHist",t.form)}}}]})},createQuitBtnCtn:function(){var t=this;this.quitBtnCtn=Ext.create("Ext.container.Container",{itemId:"quitBtnCtn",hidden:!0,items:[{xtype:"button",itemId:"quitBtn",glyph:"xf08b@FontAwesome",text:"Quitter",tooltip:translate("$gridEdit.quitTip"),listeners:{click:function(e,i,n){if(t.showConfirmationOnQuit){var o=Ext.create("Common.ux.window.PromptWindow",{withClose:!1});o.setTitle("${gridEdit.quitEditionTitle}"),o.down("#confirmMsg").setText(translate("gridEdit.quitEditionMsg")),o.down("#description").hide(),o.down("#inputText").hide(),o.query("button")[0].setText(translate("yes")),o.query("button")[1].setText(translate("no")),o.callbackFunction=function(e,i){"ok"===e?(Utility.loading.start(o.query("button")[0]),t.form.fireEvent("quitEdit",t.form,o)):o.close()},o.show()}else t.form.fireEvent("quitEdit",t.form)}}}]})},enterEditMode:function(){var t=this;t.form.editMode=!0,t.form.recordValues=t.form.getForm().getValues(),t.editBtnCtn.hide(),t.showCancelBtn&&t.cancelBtnCtn.show(),t.saveBtnCtn.show(),t.quitBtnCtn.show(),t.saveBtnCtn.down("#saveBtn").setDisabled(!0),t.showCancelBtn&&t.cancelBtnCtn.down("#cancelBtn").setDisabled(!0);for(var e=t.form.query("[readOnly=true]"),i=t.form.query("fieldset"),n=0;n<e.length;n++)Ext.isDefined(e[n].blocked)||e[n].blocked||(e[n].setReadOnly(!1),"textfield"===e[n].getXType()&&e[n].removeCls("textfieldReadonly"));e=t.form.query("radiofield");for(var n=0;n<e.length;n++){var o=e[n];Ext.isDefined(e[n].blocked)||e[n].blocked||o.enable()}for(var n=0;n<i.length;n++)i[n].blocked||i[n].addCls("grey-fieldset");t.form.addBodyCls("editFormPanel"),t.form.removeBodyCls("readOnlyFormPanel")},quitEditMode:function(){var t=this;t.form.editMode=!1,t.editBtnCtn.show(),t.saveBtnCtn.hide(),t.showCancelBtn&&t.cancelBtnCtn.hide(),t.quitBtnCtn.hide(),t.showHistoryBtn&&t.chHistBtnCtn.show(),t.editBtnCtn.down("#editBtn").setDisabled(!1),t.saveBtnCtn.down("#saveBtn").setDisabled(!0),t.showCancelBtn&&t.cancelBtnCtn.down("#cancelBtn").setDisabled(!0),t.quitBtnCtn.down("#quitBtn").setDisabled(!1),t.showHistoryBtn&&t.chHistBtnCtn.down("#chHistBtn").setDisabled(!1);for(var e=t.form.query("[readOnly=false]"),i=t.form.query("fieldset"),n=0;n<e.length;n++)e[n].setReadOnly(!0),"textfield"===e[n].getXType()&&e[n].addCls("textfieldReadonly"),e[n].removeCls("dirty-form-field");e=t.form.query("radiofield");for(var n=0;n<e.length;n++){var o=e[n];o.getValue()?o.enable():o.disable()}for(var n=0;n<i.length;n++)if(i[n].removeCls("grey-fieldset"),i[n].getEl()){var d=i[n].getEl().down(".x-fieldset-header-text");Ext.isEmpty(d)||d.removeCls("dirty-form-field")}this.form.addBodyCls("readOnlyFormPanel"),this.form.removeBodyCls("editFormPanel")},cancelEdit:function(){var t=this;t.showCancelBtn&&t.cancelBtnCtn.down("#cancelBtn").setDisabled(!0),t.saveBtnCtn.down("#saveBtn").setDisabled(!0),t.editBtnCtn.hide(),t.form.recordValues=t.form.getForm().getValues()},handleFieldChanged:function(t,e,i,n){var o=this,d=o.form.recordValues,r=o.form.getValues();if(o.form.editMode&&!t.blocked){if(void 0!==t.isAmtFld&&t.isAmtFld===!0){var s=t.getValue().length;s>21?(t.inputEl.dom.maxLength=18,t.maxLength=18,t.isValid()):(t.inputEl.dom.maxLength=26,t.maxLength=26,t.isValid())}JSON.stringify(d)!=JSON.stringify(r)&&o.form.isValid()?(o.saveBtnCtn.down("button").setDisabled(!1),o.showCancelBtn&&o.cancelBtnCtn.down("button").setDisabled(!1)):(o.saveBtnCtn.down("button").setDisabled(!0),o.showCancelBtn&&o.cancelBtnCtn.down("button").setDisabled(!0)),"radiofield"!==t.getXType()&&e!=d[t.name]||"radiofield"===t.getXType()&&t.getGroupValue()!=d[t.name]?o.highlightModifications(t):o.unHighlightModifications(t)}},checkChangesOnOtherFields:function(t){var e=this.form.recordValues;if(null!=t){var i=t.items.items;if(t.query("radiogroup").length>1)for(var n=0;n<i.length;n++){var o=i[n].getChecked();if(o.length>1)return!0;var d=i[n].getChecked()[0];if(d){var r=d.name;if(e[r]!=i[n].getChecked()[0].inputValue)return!0}}}},highlightModifications:function(t){if("radiofield"===t.getXType()){var e=t.up("fieldset"),i=e.getEl().down(".x-fieldset-header-text");i.addCls("dirty-form-field")}else t.addCls("dirty-form-field")},unHighlightModifications:function(t){var e=!1;if("radiofield"===t.getXType()){var i=t.up("fieldset");if(e=this.checkChangesOnOtherFields(i))return;var n=i.getEl().down(".x-fieldset-header-text");n.removeCls("dirty-form-field")}else t.removeCls("dirty-form-field")}});