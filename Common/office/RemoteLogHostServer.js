/*************************************************************
 Copyright (c) 2013 Microsoft Corporation
 **************************************************************/
var AppsTelemetry;(function(a){(function(a){a[a["info"]=0]="info";a[a["warning"]=1]="warning";a[a["error"]=2]="error"})(a.TraceLevel||(a.TraceLevel={}));var c=a.TraceLevel;(function(a){(function(a){a[a["none"]=0]="none";a[a["flush"]=1]="flush"})(a.SendFlag||(a.SendFlag={}));var b=a.SendFlag})(a.InternalModule||(a.InternalModule={}));var b=a.InternalModule;a.LogTag={FlightSucceed:"FlightSucceed"}})(AppsTelemetry||(AppsTelemetry={}));var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d},AppsTelemetry;(function(a){(function(){var a,h,d,l=3,j=1400,f=1401,e="init",b=false,i=function(c){__extends(a,c);function a(d,e){var b=5*1024,a=3e4,f=new Diag.UlsUploadConfiguration(b,null,a);c.call(this,d,e,f)}a.prototype.showAssertDialog=function(){};a.prototype.cg=function(){};a.prototype.uploadLogs=function(a){return c.prototype.uploadLogs.call(this,a,b)};return a}(Diag.UploadingUlsHost);function g(d){var a=JSON.parse(d.data);if(e!="init"){var b;if(a.traceLevel===1)b=Diag.ULSTraceLevel.warning;else if(a.traceLevel===0)b=Diag.ULSTraceLevel.info;else if(a.traceLevel===2)b=Diag.ULSTraceLevel.error;if(a.message!=="{}")if(a.internalLog===true)Diag.ULS.sendTraceTag(5252513,f,b,a.message);else Diag.ULS.sendTraceTag(l,j,b,a.message);a.flag===1&&c()}else{k(a);window.parent.postMessage("ProxyFrameReadyToLog","*");e="log"}}function k(b){h=b.appName;d=b.sessionId;Diag.ULS.setTraceLevel(Diag.ULSTraceLevel.info);a=new i(d,"RemoteUls.ashx");Diag.ULS.setUlsHost(a)}function c(){if(a){b=true;a.flushForAppClose();b=false}}window.onbeforeunload=function(){c()};window.onunload=function(){c()};window.onload=function(){window.addEventListener("message",g);window.parent.postMessage("ProxyFrameReadyToInit","*")}})(a.CrossDomain||(a.CrossDomain={}));var b=a.CrossDomain})(AppsTelemetry||(AppsTelemetry={}))